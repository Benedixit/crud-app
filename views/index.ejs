<!doctype html>
<html lang="en">
  <%- include('./partials/header'); %>
  <body>
  	<%- include('./partials/navbar'); %>


  	<div class="container">
  			<% if (messages.length > 0) {%>
  			<div class="alert alert-primary alert-dismissible fade show mt-3" role="alert">
  				<%= messages %>
  				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  			</div>
  			<% }%>
  		<a class="btn btn-primary my-3" href="/add_customer" role="button">Create New Bio</a>
  		 <table class="table">
    	<thead>
    		<tr>
    			<th scope="col">Name</th>
    			<th scope="col">Email</th>
    			<th scope="col">Address</th>
    			<th scope="col">Bio</th>
    			<th scope="col"></th>
    		</tr>
    	</thead>
    	<tbody>
    		<% customers.forEach((customer) => {%>
    		<tr>
    			<td><%= customer.name %></td>
    			<td><%= customer.email %></td>
    			<td><%= customer.address %></td>
    			<td><%= customer.bio.substring(0, 50) %></td>
    			<td>
    				<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal" id="<%= customer._id %>">
    					<i class="bi bi-trash3"></i>
    				</button>
    				<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    					<div class="modal-dialog">
    						<div class="modal-content">
    							<div class="modal-header">
    								<h5 class="modal-title" id="exampleModalLabel">Delete this Record</h5>
    								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    							</div>
    							<div class="modal-body">
    								<p>I agree to delete this record from the database</p>
    							</div>
    							<div class="modal-footer">
    								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    								<a class="btn btn-danger" href="/<%= customer._id %>/delete" role="button">Delete</a>
    							</div>
    						</div>
    					</div>
    				</div>
    				<a class="btn btn-primary" href="/edit/<%= customer._id %>" role="button"><i class="bi bi-pencil-square"></i></a>
    				
    			</td>
    		</tr>
    		<%})%>
    	</tbody>
    </table>
  		
  	</div>
  	<%- include('./partials/footer'); %>

    
  </body>
</html>






